## Docker架构和底层技术简介

docker是直接在linux kernel上的，没有虚机。

### Docker Engine

包括：

- 后台进程（dockerd）
- REST API Server
- CLI接口（docker）

CLI接口和dockerd之间用REST server通信

### 底层技术

- Namespaces：做隔离pid，net，ipc
- Control groups：做资源限制
- Union file systems：container和image的分层

## Docker Image概述

- image是文件和meta data的集合
- image是分层的。最底层是Base image（如ubuntu image, centos image等）
- 不同的image可以共享layer
- image本身是read-only的

> 默认`docker pull`拉取的image都是从`docker hub`上拉的

## Docker Container概述

- 通过image创建（copy）
- 在`image layers`之上创建的一个`container layer`（可读写）
- image负责app的存储和分发，container负责运行app

一些命令：

- `docker run`：Run a command in a new container
- `docker exec`：Run a command in a running container
- `docker commit`：把container重新commit一个image（往往是在container中做了一些改动之后）
